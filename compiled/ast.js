(function(){function ParseFailed(message){this.message=message,this.not_compiler_issue=!0}function SyntaxError(message){this.message=message,this.locked=!0,this.not_compiler_issue=!0}function ASTBase(ts,parent){this.locked=!1,this.ts=ts,this.line=ts.line,this.ast_parent=parent,this.parse(),this.endline=ts.line}var k$comprl=function(iterable,func){var o=[];if(iterable instanceof Array||"number"==typeof iterable.length)for(var i=0;iterable.length>i;i++)o.push(func(iterable[i]));else{if("function"!=typeof iterable.next)throw"Object is not iterable";for(var i;null!=(i=iterable.next());)o.push(func(i))}return o},k$indexof=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};exports.SyntaxError=SyntaxError,ASTBase.prototype.opt=function(){var start_index,cls,token,ki$1,kobj$1;for(start_index=this.ts.index,kobj$1=arguments,ki$1=0;kobj$1.length>ki$1;ki$1++)if(cls=kobj$1[ki$1],"string"==typeof cls){if(this.ts.type===cls)return token=this.ts.current,this.ts.next(),token}else try{return new cls(this.ts,this)}catch(err){if(this.ts.goto_token(start_index),err.locked||!err.not_compiler_issue)throw err}return null},ASTBase.prototype.req=function(){var rv,list,cls,message;return rv=this.opt.apply(this,arguments),null!=rv?rv:(list=k$comprl(Array.prototype.slice.call(arguments),function(k$i){return cls=k$i,cls.name||cls}),message=1===list.length?"Expected "+list[0]:"Expected one of "+list.join(", "),this.error(""+message),void 0)},ASTBase.prototype.opt_val=function(){var token;return k$indexof.call(arguments,this.ts.value)>=0?(token=this.ts.current,this.ts.next(),token):null},ASTBase.prototype.req_val=function(){var rv,args,v;return rv=this.opt_val.apply(this,arguments),null!=rv?rv:(args=k$comprl(Array.prototype.slice.call(arguments),function(k$i){return v=k$i}),this.error("Expected '"+args.join("' or '")+"'"),void 0)},ASTBase.prototype.opt_multi=function(){var cls,rv;if(cls=this.opt.apply(this,arguments),null==cls)return[];for(rv=[cls];null!=cls;)cls=this.opt.apply(this,arguments),null!=cls?rv.push(cls):void 0;return rv},ASTBase.prototype.req_multi=function(){var rv,list,cls;return rv=this.opt_multi.apply(this,arguments),rv.length>0?rv:(list=k$comprl(Array.prototype.slice.call(arguments),function(k$i){return cls=k$i,cls.name||cls}),this.error("Expected one of "+list.join(", ")),void 0)},ASTBase.prototype.parse=function(){this.lock(),this.error("Parser Not Implemented: "+this.constructor.name)},ASTBase.prototype.js=function(){this.error("Javascript Generator Not Implemented: "+this.constructor.name)},ASTBase.prototype.error=function(msg){var full_msg;throw this.locked?(full_msg=msg+" on line "+this.line,null!=this.ts.options&&null!=this.ts.options.filename&&(full_msg+=" in file "+this.ts.options.filename),new SyntaxError(full_msg)):new ParseFailed(msg)},ASTBase.prototype.lock=function(){this.locked=!0,this.line=this.ts.line},exports.ASTBase=ASTBase})();