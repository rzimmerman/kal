(function(){function ParseFailed(message){this.message=message,this.not_compiler_issue=!0}function SyntaxError(message){this.message=message,this.locked=!0,this.not_compiler_issue=!0}function ASTBase(ts,parent){this.locked=!1,this.ts=ts,this.line=ts.line,this.ast_parent=parent,this.parse(),this.endline=ts.line}var k$indexof=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};exports.SyntaxError=SyntaxError,ASTBase.prototype.opt=function(){var rv,start_index,cls,ki$1,kobj$1;for(rv=null,start_index=this.ts.index,kobj$1=arguments,ki$1=0;kobj$1.length>ki$1;ki$1++)if(cls=kobj$1[ki$1],"string"==typeof cls){if(this.ts.type===cls)return rv=this.ts.current,this.ts.next(),rv}else try{return rv=new cls(this.ts,this)}catch(e){if(this.ts.goto_token(start_index),e.locked||!e.not_compiler_issue)throw e}return null},ASTBase.prototype.req=function(){var rv,list,cls,ki$2,kobj$2,message;if(rv=this.opt.apply(this,arguments),null!=rv)return rv;for(list=[],kobj$2=arguments,ki$2=0;kobj$2.length>ki$2;ki$2++)cls=kobj$2[ki$2],list.push(cls.name||cls);message=1===list.length?"Expected "+list[0]:"Expected one of "+list.join(", "),this.error(""+message)},ASTBase.prototype.opt_val=function(){var rv;return k$indexof.call(arguments,this.ts.value)>=0?(rv=this.ts.current,this.ts.next(),rv):null},ASTBase.prototype.req_val=function(){var rv,args,v,ki$3,kobj$3;if(rv=this.opt_val.apply(this,arguments),null!=rv)return rv;for(args=[],kobj$3=arguments,ki$3=0;kobj$3.length>ki$3;ki$3++)v=kobj$3[ki$3],args.push(v);this.error("Expected '"+args.join("' or '")+"'")},ASTBase.prototype.req_multi=function(){var rv,list,cls,ki$4,kobj$4;if(rv=this.opt_multi.apply(this,arguments),rv.length>0)return rv;for(list=[],kobj$4=arguments,ki$4=0;kobj$4.length>ki$4;ki$4++)cls=kobj$4[ki$4],list.push(cls.name||cls);this.error("Expected one of "+list.join(", "))},ASTBase.prototype.opt_multi=function(){var cls,rv;if(cls=this.opt.apply(this,arguments),null==cls)return[];for(rv=[cls];null!=cls;)cls=this.opt.apply(this,arguments),null!=cls?rv.push(cls):void 0;return rv},ASTBase.prototype.parse=function(){this.error("Parser Not Implemented: "+this.constructor.name)},ASTBase.prototype.js=function(){this.error("Javascript Generator Not Implemented: "+this.constructor.name)},ASTBase.prototype.error=function(msg){var full_msg;throw this.locked?(full_msg=msg+" on line "+this.line,null!=this.ts.options&&null!=this.ts.options.filename&&(full_msg+=" in file "+this.ts.options.filename),new SyntaxError(full_msg)):new ParseFailed(msg)},ASTBase.prototype.lock=function(){this.locked=!0,this.line=this.ts.line},exports.ASTBase=ASTBase})();